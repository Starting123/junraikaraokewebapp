<!-- Page Header -->
<section class="page-header">
    <div class="container">
        <div class="page-header-content">
            <h1 class="page-title">Contact Us</h1>
            <p class="page-description">
                Get in touch with us for any questions, booking assistance, or feedback
            </p>
            <nav class="breadcrumb">
                <a href="/">Home</a>
                <i class="fas fa-chevron-right"></i>
                <span>Contact</span>
            </nav>
        </div>
    </div>
</section>

<!-- Contact Information -->
<section class="contact-info-section">
    <div class="container">
        <div class="contact-grid">
            <div class="contact-card">
                <div class="contact-icon">
                    <i class="fas fa-map-marker-alt"></i>
                </div>
                <div class="contact-content">
                    <h3>Visit Us</h3>
                    <p>123 Music Street<br>
                    Entertainment District<br>
                    Bangkok, Thailand 10110</p>
                    <a href="https://maps.google.com/maps?q=123+Music+Street+Bangkok" 
                       class="contact-link" target="_blank">
                        <i class="fas fa-external-link-alt"></i>
                        View on Google Maps
                    </a>
                </div>
            </div>
            
            <div class="contact-card">
                <div class="contact-icon">
                    <i class="fas fa-phone"></i>
                </div>
                <div class="contact-content">
                    <h3>Call Us</h3>
                    <p><strong>Main Line:</strong><br>+66 (0) 2-xxx-xxxx</p>
                    <p><strong>Booking Hotline:</strong><br>+66 (0) 8x-xxx-xxxx</p>
                    <a href="tel:+6620000000" class="contact-link">
                        <i class="fas fa-phone"></i>
                        Call Now
                    </a>
                </div>
            </div>
            
            <div class="contact-card">
                <div class="contact-icon">
                    <i class="fas fa-envelope"></i>
                </div>
                <div class="contact-content">
                    <h3>Email Us</h3>
                    <p><strong>General:</strong><br>info@junraikaraoke.com</p>
                    <p><strong>Bookings:</strong><br>booking@junraikaraoke.com</p>
                    <a href="mailto:info@junraikaraoke.com" class="contact-link">
                        <i class="fas fa-envelope"></i>
                        Send Email
                    </a>
                </div>
            </div>
            
            <div class="contact-card">
                <div class="contact-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="contact-content">
                    <h3>Business Hours</h3>
                    <p><strong>Mon - Fri:</strong><br>2:00 PM - 2:00 AM</p>
                    <p><strong>Sat - Sun:</strong><br>10:00 AM - 2:00 AM</p>
                    <p><strong>Holidays:</strong><br>10:00 AM - 12:00 AM</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Contact Form and Map -->
<section class="contact-form-section">
    <div class="container">
        <div class="contact-content-grid">
            <!-- Contact Form -->
            <div class="contact-form-container">
                <div class="form-header">
                    <h2>Send us a Message</h2>
                    <p>Fill out the form below and we'll get back to you as soon as possible.</p>
                </div>
                
                <form id="contactForm" class="contact-form">
                    <% if (typeof csrfToken !== 'undefined' && csrfToken) { %>
                        <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                    <% } %>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName">First Name *</label>
                            <input type="text" id="firstName" name="first_name" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName">Last Name *</label>
                            <input type="text" id="lastName" name="last_name" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="email">Email Address *</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" name="phone">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="subject">Subject *</label>
                        <select id="subject" name="subject" required>
                            <option value="">Select a subject</option>
                            <option value="booking">Booking Inquiry</option>
                            <option value="complaint">Complaint</option>
                            <option value="suggestion">Suggestion</option>
                            <option value="technical">Technical Support</option>
                            <option value="partnership">Partnership</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="message">Message *</label>
                        <textarea id="message" name="message" rows="5" 
                                  placeholder="Please provide details about your inquiry..." required></textarea>
                        <div class="character-count">
                            <span id="charCount">0</span>/1000 characters
                        </div>
                    </div>
                    
                    <div class="form-group checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="newsletter" name="newsletter">
                            <span class="checkmark"></span>
                            Subscribe to our newsletter for updates and special offers
                        </label>
                    </div>
                    
                    <div class="form-group checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="privacy" name="privacy" required>
                            <span class="checkmark"></span>
                            I agree to the <a href="/privacy" target="_blank">Privacy Policy</a> and 
                            <a href="/terms" target="_blank">Terms of Service</a> *
                        </label>
                    </div>
                    
                    <div class="form-actions">
                        <button type="reset" class="btn btn-outline">
                            <i class="fas fa-undo"></i>
                            Reset Form
                        </button>
                        <button type="submit" class="btn btn-primary" id="submitBtn">
                            <i class="fas fa-paper-plane"></i>
                            Send Message
                        </button>
                    </div>
                </form>
                
                <!-- Success/Error Messages -->
                <div id="formMessage" class="form-message hidden">
                    <div class="message-content"></div>
                </div>
            </div>
            
            <!-- Map and Additional Info -->
            <div class="contact-map-container">
                <div class="map-section">
                    <h3>Find Us</h3>
                    <div class="map-placeholder">
                        <iframe 
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3875.5539430874!2d100.5417537!3d13.7563309!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMTPCsDQ1JzIyLjgiTiAxMDDCsDMyJzMwLjMiRQ!5e0!3m2!1sen!2sth!4v1234567890"
                            width="100%" 
                            height="300" 
                            style="border:0;" 
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade">
                        </iframe>
                    </div>
                    <div class="map-directions">
                        <h4>Getting Here</h4>
                        <ul>
                            <li><strong>BTS:</strong> Siam Station (5 min walk)</li>
                            <li><strong>MRT:</strong> Sukhumvit Station (8 min walk)</li>
                            <li><strong>Bus:</strong> Lines 15, 40, 204 (Music Street stop)</li>
                            <li><strong>Parking:</strong> Available on-site</li>
                        </ul>
                    </div>
                </div>
                
                <div class="additional-info">
                    <h3>Quick Facts</h3>
                    
                    <div class="info-item">
                        <i class="fas fa-parking"></i>
                        <div>
                            <h4>Free Parking</h4>
                            <p>Complimentary parking available for all customers</p>
                        </div>
                    </div>
                    
                    <div class="info-item">
                        <i class="fas fa-wifi"></i>
                        <div>
                            <h4>Free WiFi</h4>
                            <p>High-speed internet throughout the venue</p>
                        </div>
                    </div>
                    
                    <div class="info-item">
                        <i class="fas fa-utensils"></i>
                        <div>
                            <h4>Food & Drinks</h4>
                            <p>Wide selection of snacks and beverages available</p>
                        </div>
                    </div>
                    
                    <div class="info-item">
                        <i class="fas fa-wheelchair"></i>
                        <div>
                            <h4>Accessible</h4>
                            <p>Wheelchair accessible rooms and facilities</p>
                        </div>
                    </div>
                </div>
                
                <div class="social-section">
                    <h3>Follow Us</h3>
                    <div class="social-links">
                        <a href="#" class="social-link facebook">
                            <i class="fab fa-facebook-f"></i>
                            <span>Facebook</span>
                        </a>
                        <a href="#" class="social-link line">
                            <i class="fab fa-line"></i>
                            <span>LINE</span>
                        </a>
                        <a href="#" class="social-link instagram">
                            <i class="fab fa-instagram"></i>
                            <span>Instagram</span>
                        </a>
                        <a href="#" class="social-link youtube">
                            <i class="fab fa-youtube"></i>
                            <span>YouTube</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FAQ Section -->
<section class="faq-section">
    <div class="container">
        <div class="section-header">
            <h2>Frequently Asked Questions</h2>
            <p>Find answers to common questions about our services</p>
        </div>
        
        <div class="faq-grid">
            <div class="faq-item">
                <div class="faq-question">
                    <h4>How do I make a booking?</h4>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>You can make a booking through our website by selecting a room, choosing your preferred date and time, and completing the booking form. You can also call our booking hotline or visit us in person.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h4>What is your cancellation policy?</h4>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>Bookings can be cancelled up to 24 hours before your scheduled time for a full refund. Cancellations within 24 hours may incur a cancellation fee. Same-day cancellations are non-refundable.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h4>Do you provide food and drinks?</h4>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>Yes! We offer a wide selection of snacks, meals, and beverages that can be ordered and delivered directly to your room. Our menu includes both Thai and international options.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h4>How many songs are available?</h4>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>We have over 100,000 songs in our library, including the latest hits and classics in Thai, English, Japanese, Korean, Chinese, and other languages. Our song database is updated regularly.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h4>Is parking available?</h4>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>Yes, we provide free parking for all our customers. Our parking area can accommodate cars, motorcycles, and bicycles. Valet parking is also available upon request.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h4>Can I bring my own food and drinks?</h4>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>Outside food and beverages are not permitted in our rooms for hygiene and safety reasons. However, we offer a comprehensive menu with competitive prices and quality options.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const contactForm = document.getElementById('contactForm');
    const messageTextarea = document.getElementById('message');
    const charCount = document.getElementById('charCount');
    const formMessage = document.getElementById('formMessage');
    const submitBtn = document.getElementById('submitBtn');
    
    // Character count for message textarea
    messageTextarea.addEventListener('input', function() {
        const count = this.value.length;
        charCount.textContent = count;
        
        if (count > 1000) {
            charCount.style.color = '#e74c3c';
            this.value = this.value.substring(0, 1000);
            charCount.textContent = '1000';
        } else {
            charCount.style.color = '#7f8c8d';
        }
    });
    
    // Contact form submission
    contactForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const formData = new FormData(this);
        const data = Object.fromEntries(formData);
        
        // Disable submit button and show loading
        submitBtn.disabled = true;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
        
        try {
            const response = await fetch('/api/contact', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRF-Token': document.querySelector('meta[name="csrf-token"]')?.getAttribute('content')
                },
                body: JSON.stringify(data)
            });
            
            const result = await response.json();
            
            if (result.success) {
                showMessage('success', 'Thank you for your message! We\'ll get back to you within 24 hours.');
                contactForm.reset();
                charCount.textContent = '0';
            } else {
                showMessage('error', 'Failed to send message: ' + result.message);
            }
        } catch (error) {
            console.error('Contact form error:', error);
            showMessage('error', 'Failed to send message. Please try again or contact us directly.');
        } finally {
            // Re-enable submit button
            submitBtn.disabled = false;
            submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Send Message';
        }
    });
    
    // FAQ accordion functionality
    document.querySelectorAll('.faq-question').forEach(question => {
        question.addEventListener('click', function() {
            const faqItem = this.parentElement;
            const answer = faqItem.querySelector('.faq-answer');
            const icon = this.querySelector('i');
            
            // Toggle active class
            faqItem.classList.toggle('active');
            
            // Toggle answer visibility
            if (faqItem.classList.contains('active')) {
                answer.style.maxHeight = answer.scrollHeight + 'px';
                icon.style.transform = 'rotate(180deg)';
            } else {
                answer.style.maxHeight = '0';
                icon.style.transform = 'rotate(0deg)';
            }
        });
    });
    
    // Auto-fill form if user is logged in
    <% if (typeof user !== 'undefined' && user) { %>
        document.getElementById('firstName').value = '<%= user.first_name || "" %>';
        document.getElementById('lastName').value = '<%= user.last_name || "" %>';
        document.getElementById('email').value = '<%= user.email || "" %>';
        document.getElementById('phone').value = '<%= user.phone || "" %>';
    <% } %>
    
    function showMessage(type, message) {
        const messageDiv = formMessage.querySelector('.message-content');
        messageDiv.textContent = message;
        
        formMessage.className = 'form-message ' + type;
        formMessage.classList.remove('hidden');
        
        // Hide message after 5 seconds
        setTimeout(() => {
            formMessage.classList.add('hidden');
        }, 5000);
        
        // Scroll to message
        formMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
});
</script>