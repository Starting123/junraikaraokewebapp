<!DOCTYPE html>
<html lang="<%= typeof lang !== 'undefined' ? lang : 'th' %>" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <!-- Performance Hints -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- SEO Meta Tags -->
    <title><%= typeof title !== 'undefined' ? title + ' | ‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡πÉ‡∏™ ‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞' : '‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡πÉ‡∏™ ‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞ - ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°' %></title>
    <meta name="description" content="<%= typeof description !== 'undefined' ? description : '‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡πÉ‡∏™ - ‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢ ‡πÄ‡∏û‡∏•‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á ‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ!' %>">
    <meta name="keywords" content="karaoke, ‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡πÉ‡∏™, ‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞, ‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á, ‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏¥‡∏á, ‡∏î‡∏ô‡∏ï‡∏£‡∏µ, ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å, ‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á, premium karaoke bangkok">
    <meta name="author" content="Junrai Karaoke">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="<%= typeof title !== 'undefined' ? title + ' | ‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡πÉ‡∏™ ‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞' : '‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡πÉ‡∏™ ‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞ - ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°' %>">
    <meta property="og:description" content="<%= typeof description !== 'undefined' ? description : '‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡πÉ‡∏™ - ‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢ ‡πÄ‡∏û‡∏•‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á' %>">
    <meta property="og:type" content="website">
    <meta property="og:url" content="<%= typeof url !== 'undefined' ? url : 'https://junraikaraoke.com' %>">
    <meta property="og:image" content="/images/og-image-junrai.jpg">
    <meta property="og:locale" content="th_TH">
    <meta property="og:site_name" content="‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡πÉ‡∏™ ‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="<%= typeof title !== 'undefined' ? title + ' | ‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡πÉ‡∏™ ‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞' : '‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡πÉ‡∏™ ‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞ - ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°' %>">
    <meta name="twitter:description" content="<%= typeof description !== 'undefined' ? description : '‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡πÉ‡∏™ - ‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢ ‡πÄ‡∏û‡∏•‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á' %>">
    <meta name="twitter:image" content="/images/twitter-card-junrai.jpg">
    
    <!-- Favicon and Icons -->
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/apple-touch-icon-120x120.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#FF6B35">
    <meta name="msapplication-TileColor" content="#FF6B35">
    
    <!-- Theme CSS (Unified Design System with Junrai Branding) -->
    <link rel="stylesheet" href="/stylesheets/theme.css">
    
    <!-- Page-specific CSS (only load if needed) -->
    <% if (typeof pageCSS !== 'undefined' && pageCSS.length > 0) { %>
        <% pageCSS.forEach(function(css) { %>
            <link rel="stylesheet" href="/stylesheets/<%= css %>.css">
        <% }); %>
    <% } %>
    
    <!-- Critical Theme Initialization (inline for zero flash) -->
    <script>
        (function() {
            // Get saved theme or detect system preference
            const savedTheme = localStorage.getItem('junrai-theme');
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const theme = savedTheme || (systemPrefersDark ? 'dark' : 'light');
            
            // Apply theme immediately to prevent flash
            document.documentElement.setAttribute('data-theme', theme);
            
            // Store the preference
            localStorage.setItem('junrai-theme', theme);
        })();
    </script>
</head>
<body>
    <!-- Theme Toggle Button -->
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark/light mode">
        <span id="themeIcon">üåô</span>
    </button>

    <!-- Navigation Bar -->
    <nav class="navbar" role="navigation" aria-label="Main navigation">
        <div class="navbar-container">
            <!-- Brand Logo -->
            <a href="/" class="navbar-brand" aria-label="‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡πÉ‡∏™ ‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞ ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å">
                <div class="brand-logo">
                    <i class="fas fa-microphone" aria-hidden="true"></i>
                    <span class="brand-text">‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡πÉ‡∏™</span>
                    <span class="brand-subtitle">‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞</span>
                </div>
            </a>

            <!-- Navigation Links -->
            <ul class="navbar-nav" id="navbarNav" role="menubar">
                <li role="none">
                    <a href="/" 
                       class="nav-link <%= typeof currentPage !== 'undefined' && currentPage === 'home' ? 'active' : '' %>" 
                       role="menuitem"
                       <%= typeof currentPage !== 'undefined' && currentPage === 'home' ? 'aria-current="page"' : '' %>>
                        <i class="fas fa-home" aria-hidden="true"></i>
                        <span>‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</span>
                    </a>
                </li>
                <li role="none">
                    <a href="/rooms" 
                       class="nav-link <%= typeof currentPage !== 'undefined' && currentPage === 'rooms' ? 'active' : '' %>" 
                       role="menuitem"
                       <%= typeof currentPage !== 'undefined' && currentPage === 'rooms' ? 'aria-current="page"' : '' %>>
                        <i class="fas fa-door-open" aria-hidden="true"></i>
                        <span>‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å</span>
                    </a>
                </li>
                <li role="none">
                    <a href="/bookings" 
                       class="nav-link <%= typeof currentPage !== 'undefined' && currentPage === 'bookings' ? 'active' : '' %>" 
                       role="menuitem"
                       <%= typeof currentPage !== 'undefined' && currentPage === 'bookings' ? 'aria-current="page"' : '' %>>
                        <i class="fas fa-calendar-alt" aria-hidden="true"></i>
                        <span>‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á</span>
                    </a>
                </li>
                <li role="none">
                    <a href="/contact" 
                       class="nav-link <%= typeof currentPage !== 'undefined' && currentPage === 'contact' ? 'active' : '' %>" 
                       role="menuitem"
                       <%= typeof currentPage !== 'undefined' && currentPage === 'contact' ? 'aria-current="page"' : '' %>>
                        <i class="fas fa-phone" aria-hidden="true"></i>
                        <span>‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</span>
                    </a>
                </li>
                
                <% if (typeof user !== 'undefined' && user) { %>
                    <!-- Authenticated User Menu -->
                    <li class="user-menu" role="none">
                        <div class="navbar-user">
                            <div class="user-avatar" title="<%= user.firstName || user.username || '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ' %>">
                                <%= (user.firstName ? user.firstName.charAt(0) : (user.username ? user.username.charAt(0) : 'U')).toUpperCase() %>
                            </div>
                            <button class="user-dropdown-toggle" 
                                    id="userMenuToggle" 
                                    aria-haspopup="true" 
                                    aria-expanded="false"
                                    aria-label="‡πÄ‡∏°‡∏ô‡∏π‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ">
                                <span><%= user.firstName || user.username || '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ' %></span>
                                <i class="fas fa-chevron-down" aria-hidden="true"></i>
                            </button>
                            <div class="user-dropdown" id="userDropdown" role="menu">
                                <a href="/dashboard" 
                                   class="user-dropdown-item" 
                                   role="menuitem">
                                    <i class="fas fa-tachometer-alt" aria-hidden="true"></i>
                                    ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î
                                </a>
                                <a href="/profile" 
                                   class="user-dropdown-item" 
                                   role="menuitem">
                                    <i class="fas fa-user" aria-hidden="true"></i>
                                    ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
                                </a>
                                <a href="/bookings/history" 
                                   class="user-dropdown-item" 
                                   role="menuitem">
                                    <i class="fas fa-history" aria-hidden="true"></i>
                                    ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
                                </a>
                                <div class="user-dropdown-divider" role="separator"></div>
                                <a href="/auth/logout" 
                                   class="user-dropdown-item" 
                                   role="menuitem">
                                    <i class="fas fa-sign-out-alt" aria-hidden="true"></i>
                                    ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
                                </a>
                            </div>
                        </div>
                    </li>
                <% } else { %>
                    <!-- Guest Menu -->
                    <li role="none">
                        <a href="/auth/login" 
                           class="nav-link" 
                           role="menuitem">
                            <i class="fas fa-sign-in-alt" aria-hidden="true"></i>
                            <span>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</span>
                        </a>
                    </li>
                    <li role="none">
                        <a href="/auth/register" 
                           class="btn btn-primary btn-sm" 
                           role="menuitem">
                            <i class="fas fa-user-plus" aria-hidden="true"></i>
                            <span>‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</span>
                        </a>
                    </li>
                <% } %>
            </ul>

            <!-- Theme Toggle & Mobile Menu -->
            <div class="navbar-actions">
                <!-- Theme Toggle Button -->
                <button class="theme-toggle" 
                        id="themeToggle" 
                        aria-label="‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ò‡∏µ‡∏°‡πÅ‡∏™‡∏á/‡∏°‡∏∑‡∏î"
                        title="‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ò‡∏µ‡∏°‡πÅ‡∏™‡∏á/‡∏°‡∏∑‡∏î">
                    <span id="themeIcon" aria-hidden="true">üåô</span>
                </button>

                <!-- Mobile Menu Toggle -->
                <button class="navbar-toggle" 
                        id="navbarToggle" 
                        aria-label="‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠"
                        aria-expanded="false"
                        aria-controls="navbarNav">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Toast Notification Container -->
    <div class="toast-container" id="toastContainer" aria-live="polite" aria-label="Notifications"></div>

    <!-- Alert Messages (Server-side) -->
    <% if (typeof messages !== 'undefined' && messages) { %>
        <div class="container" style="padding-top: var(--space-4);">
            <% if (messages.success) { %>
                <div class="alert alert-success fade-in" role="alert">
                    <div class="alert-icon">
                        <i class="fas fa-check-circle" aria-hidden="true"></i>
                    </div>
                    <div class="alert-content">
                        <div class="alert-title">‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</div>
                        <div class="alert-message"><%= messages.success %></div>
                    </div>
                    <button type="button" class="alert-close" aria-label="‡∏õ‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô">
                        <i class="fas fa-times" aria-hidden="true"></i>
                    </button>
                </div>
            <% } %>
            <% if (messages.error) { %>
                <div class="alert alert-error fade-in" role="alert">
                    <div class="alert-icon">
                        <i class="fas fa-exclamation-triangle" aria-hidden="true"></i>
                    </div>
                    <div class="alert-content">
                        <div class="alert-title">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î!</div>
                        <div class="alert-message"><%= messages.error %></div>
                    </div>
                    <button type="button" class="alert-close" aria-label="‡∏õ‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô">
                        <i class="fas fa-times" aria-hidden="true"></i>
                    </button>
                </div>
            <% } %>
            <% if (messages.warning) { %>
                <div class="alert alert-warning fade-in" role="alert">
                    <div class="alert-icon">
                        <i class="fas fa-exclamation-circle" aria-hidden="true"></i>
                    </div>
                    <div class="alert-content">
                        <div class="alert-title">‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô!</div>
                        <div class="alert-message"><%= messages.warning %></div>
                    </div>
                    <button type="button" class="alert-close" aria-label="‡∏õ‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô">
                        <i class="fas fa-times" aria-hidden="true"></i>
                    </button>
                </div>
            <% } %>
            <% if (messages.info) { %>
                <div class="alert alert-info fade-in" role="alert">
                    <div class="alert-icon">
                        <i class="fas fa-info-circle" aria-hidden="true"></i>
                    </div>
                    <div class="alert-content">
                        <div class="alert-title">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
                        <div class="alert-message"><%= messages.info %></div>
                    </div>
                    <button type="button" class="alert-close" aria-label="‡∏õ‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô">
                        <i class="fas fa-times" aria-hidden="true"></i>
                    </button>
                </div>
            <% } %>
        </div>
    <% } %>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- Main Content Area -->
    <main class="main-content">
        <%- body %>
    </main>

    <!-- Footer -->
    <footer class="footer" role="contentinfo">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-brand">
                        <div class="brand-logo">
                            <i class="fas fa-microphone" aria-hidden="true"></i>
                            <h4 class="heading-4">‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡πÉ‡∏™ ‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞</h4>
                        </div>
                        <p class="text-small">‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏° ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢ ‡πÄ‡∏û‡∏•‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î ‡πÅ‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡∏ó‡∏µ‡πà‡∏≠‡∏ö‡∏≠‡∏∏‡πà‡∏ô</p>
                        
                        <!-- Social Links -->
                        <div class="social-links">
                            <a href="https://facebook.com/junraikaraoke" 
                               class="social-link facebook" 
                               aria-label="‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÄ‡∏£‡∏≤‡∏ö‡∏ô Facebook"
                               target="_blank" 
                               rel="noopener noreferrer">
                                <i class="fab fa-facebook-f" aria-hidden="true"></i>
                            </a>
                            <a href="https://instagram.com/junraikaraoke" 
                               class="social-link instagram" 
                               aria-label="‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÄ‡∏£‡∏≤‡∏ö‡∏ô Instagram"
                               target="_blank" 
                               rel="noopener noreferrer">
                                <i class="fab fa-instagram" aria-hidden="true"></i>
                            </a>
                            <a href="https://line.me/ti/p/@junraikaraoke" 
                               class="social-link line" 
                               aria-label="‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤‡∏ú‡πà‡∏≤‡∏ô LINE"
                               target="_blank" 
                               rel="noopener noreferrer">
                                <i class="fab fa-line" aria-hidden="true"></i>
                            </a>
                            <a href="https://tiktok.com/@junraikaraoke" 
                               class="social-link tiktok" 
                               aria-label="‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÄ‡∏£‡∏≤‡∏ö‡∏ô TikTok"
                               target="_blank" 
                               rel="noopener noreferrer">
                                <i class="fab fa-tiktok" aria-hidden="true"></i>
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h5 class="heading-5">‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å</h5>
                    <ul class="footer-links">
                        <li><a href="/">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a></li>
                        <li><a href="/rooms">‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å</a></li>
                        <li><a href="/bookings">‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á</a></li>
                        <li><a href="/contact">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a></li>
                        <li><a href="/about">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h5 class="heading-5">‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</h5>
                    <ul class="footer-links">
                        <li><a href="/rooms?type=standard">‡∏´‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô</a></li>
                        <li><a href="/rooms?type=premium">‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°</a></li>
                        <li><a href="/rooms?type=vip">‡∏´‡πâ‡∏≠‡∏á VIP Suite</a></li>
                        <li><a href="/rooms?type=party">‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏≤‡∏£‡πå‡∏ï‡∏µ‡πâ</a></li>
                        <li><a href="/events">‡∏à‡∏±‡∏î‡∏á‡∏≤‡∏ô‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</a></li>
                        <li><a href="/catering">‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h5 class="heading-5">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</h5>
                    <div class="contact-info">
                        <div class="contact-item">
                            <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
                            <span>123 ‡∏ñ‡∏ô‡∏ô‡∏™‡∏∏‡∏Ç‡∏∏‡∏°‡∏ß‡∏¥‡∏ó ‡πÅ‡∏Ç‡∏ß‡∏á‡∏Ñ‡∏•‡∏≠‡∏á‡∏ï‡∏±‡∏ô ‡πÄ‡∏Ç‡∏ï‡∏ß‡∏±‡∏í‡∏ô‡∏≤ ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø 10110</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-phone" aria-hidden="true"></i>
                            <a href="tel:+6621234567">02-123-4567</a>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-mobile-alt" aria-hidden="true"></i>
                            <a href="tel:+66812345678">081-234-5678</a>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-envelope" aria-hidden="true"></i>
                            <a href="mailto:info@junraikaraoke.com">info@junraikaraoke.com</a>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-clock" aria-hidden="true"></i>
                            <span>‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô 18:00 - 02:00 ‡∏ô.</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="footer-bottom-content">
                    <p class="copyright">
                        ¬© <%= new Date().getFullYear() %> ‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡πÉ‡∏™ ‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞. ‡∏™‡∏á‡∏ß‡∏ô‡∏•‡∏¥‡∏Ç‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏£
                    </p>
                    <div class="footer-legal">
                        <a href="/privacy" rel="nofollow">‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</a>
                        <span class="separator">‚Ä¢</span>
                        <a href="/terms" rel="nofollow">‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</a>
                        <span class="separator">‚Ä¢</span>
                        <a href="/sitemap" rel="nofollow">‡πÅ‡∏ú‡∏ô‡∏ú‡∏±‡∏á‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå</a>
                    </div>
                </div>
                
                <!-- Back to Top Button -->
                <button class="back-to-top" 
                        id="backToTop" 
                        aria-label="‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô"
                        title="‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô">
                    <i class="fas fa-chevron-up" aria-hidden="true"></i>
                </button>
            </div>
        </div>
    </footer>

    <!-- Junrai Core JavaScript Library -->
    <script>
        // ================================================================
        // JUNRAI KARAOKE - CORE FRONTEND LIBRARY
        // Modern JavaScript for enhanced user experience
        // ================================================================
        
        class JunraiApp {
            constructor() {
                this.init();
                this.bindEvents();
                this.setupEnhancements();
            }

            init() {
                this.themeToggle = document.getElementById('themeToggle');
                this.themeIcon = document.getElementById('themeIcon');
                this.navbarToggle = document.getElementById('navbarToggle');
                this.navbarNav = document.getElementById('navbarNav');
                this.userMenuToggle = document.getElementById('userMenuToggle');
                this.userDropdown = document.getElementById('userDropdown');
                this.loadingOverlay = document.getElementById('loadingOverlay');
                this.backToTop = document.getElementById('backToTop');
                this.toastContainer = document.getElementById('toastContainer');
                
                // Initialize theme
                this.initializeTheme();
                
                // Initialize accessibility
                this.initializeA11y();
            }

            initializeTheme() {
                const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
                this.updateThemeIcon(currentTheme);
                
                // Listen for system theme changes
                if (window.matchMedia) {
                    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
                        if (!localStorage.getItem('junrai-theme')) {
                            const newTheme = e.matches ? 'dark' : 'light';
                            document.documentElement.setAttribute('data-theme', newTheme);
                            this.updateThemeIcon(newTheme);
                        }
                    });
                }
            }

            initializeA11y() {
                // Skip to content link for keyboard navigation
                if (!document.querySelector('.skip-to-content')) {
                    const skipLink = document.createElement('a');
                    skipLink.className = 'skip-to-content';
                    skipLink.href = '#main-content';
                    skipLink.textContent = '‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏´‡∏•‡∏±‡∏Å';
                    document.body.insertBefore(skipLink, document.body.firstChild);
                }

                // Add main content ID if not exists
                const mainContent = document.querySelector('.main-content');
                if (mainContent && !mainContent.id) {
                    mainContent.id = 'main-content';
                }
            }

            bindEvents() {
                // Theme toggle
                if (this.themeToggle) {
                    this.themeToggle.addEventListener('click', this.toggleTheme.bind(this));
                }

                // Mobile navigation
                if (this.navbarToggle) {
                    this.navbarToggle.addEventListener('click', this.toggleMobileNav.bind(this));
                }

                // User dropdown menu
                if (this.userMenuToggle) {
                    this.userMenuToggle.addEventListener('click', this.toggleUserMenu.bind(this));
                }

                // Back to top button
                if (this.backToTop) {
                    this.backToTop.addEventListener('click', this.scrollToTop.bind(this));
                    window.addEventListener('scroll', this.handleScroll.bind(this));
                }

                // Global click handler for dropdowns
                document.addEventListener('click', this.handleGlobalClick.bind(this));

                // Keyboard navigation
                document.addEventListener('keydown', this.handleKeyboardNav.bind(this));

                // Alert close buttons
                document.querySelectorAll('.alert-close').forEach(btn => {
                    btn.addEventListener('click', this.closeAlert.bind(this));
                });
            }

            setupEnhancements() {
                // Auto-hide server alerts
                this.setupAutoHideAlerts();
                
                // Enhanced form interactions
                this.enhanceForms();
                
                // Loading states for forms
                this.setupFormLoading();
                
                // Smooth scrolling for anchor links
                this.setupSmoothScrolling();
                
                // Image lazy loading
                this.setupLazyLoading();
                
                // Performance monitoring
                this.setupPerformanceMonitoring();
            }

            // ================================================================
            // THEME MANAGEMENT
            // ================================================================
            
            toggleTheme() {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('junrai-theme', newTheme);
                this.updateThemeIcon(newTheme);
                
                // Announce theme change for screen readers
                this.announce(`‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ò‡∏µ‡∏°${newTheme === 'dark' ? '‡∏°‡∏∑‡∏î' : '‡∏™‡∏ß‡πà‡∏≤‡∏á'}‡πÅ‡∏•‡πâ‡∏ß`);
            }

            updateThemeIcon(theme) {
                if (this.themeIcon) {
                    this.themeIcon.textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
                    this.themeToggle.title = `‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ò‡∏µ‡∏°${theme === 'dark' ? '‡∏™‡∏ß‡πà‡∏≤‡∏á' : '‡∏°‡∏∑‡∏î'}`;
                }
            }

            // ================================================================
            // NAVIGATION MANAGEMENT
            // ================================================================
            
            toggleMobileNav() {
                const isExpanded = this.navbarNav.classList.toggle('active');
                this.navbarToggle.setAttribute('aria-expanded', isExpanded.toString());
                
                if (isExpanded) {
                    this.navbarToggle.classList.add('active');
                    document.body.style.overflow = 'hidden'; // Prevent scroll
                } else {
                    this.navbarToggle.classList.remove('active');
                    document.body.style.overflow = '';
                }
            }

            toggleUserMenu() {
                const isExpanded = this.userDropdown.classList.toggle('show');
                this.userMenuToggle.setAttribute('aria-expanded', isExpanded.toString());
            }

            handleGlobalClick(e) {
                // Close mobile nav when clicking outside
                if (this.navbarNav && 
                    !this.navbarToggle.contains(e.target) && 
                    !this.navbarNav.contains(e.target)) {
                    this.navbarNav.classList.remove('active');
                    this.navbarToggle.classList.remove('active');
                    this.navbarToggle.setAttribute('aria-expanded', 'false');
                    document.body.style.overflow = '';
                }

                // Close user dropdown when clicking outside
                if (this.userDropdown && 
                    !this.userMenuToggle.contains(e.target) && 
                    !this.userDropdown.contains(e.target)) {
                    this.userDropdown.classList.remove('show');
                    this.userMenuToggle.setAttribute('aria-expanded', 'false');
                }
            }

            // ================================================================
            // SCROLL MANAGEMENT
            // ================================================================
            
            handleScroll() {
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                
                // Show/hide back to top button
                if (this.backToTop) {
                    if (scrollTop > 300) {
                        this.backToTop.classList.add('visible');
                    } else {
                        this.backToTop.classList.remove('visible');
                    }
                }
                
                // Navbar scroll effect
                if (this.navbarNav) {
                    if (scrollTop > 100) {
                        document.querySelector('.navbar').classList.add('scrolled');
                    } else {
                        document.querySelector('.navbar').classList.remove('scrolled');
                    }
                }
            }

            scrollToTop() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            }

            setupSmoothScrolling() {
                document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function (e) {
                        e.preventDefault();
                        const target = document.querySelector(this.getAttribute('href'));
                        if (target) {
                            target.scrollIntoView({
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }
                    });
                });
            }

            // ================================================================
            // FORM ENHANCEMENTS
            // ================================================================
            
            enhanceForms() {
                // Add floating labels and validation
                document.querySelectorAll('.form-input, .form-select, .form-textarea').forEach(input => {
                    // Handle input events
                    input.addEventListener('input', this.handleFormInput.bind(this));
                    input.addEventListener('blur', this.handleFormBlur.bind(this));
                    input.addEventListener('focus', this.handleFormFocus.bind(this));
                    
                    // Initialize state
                    if (input.value.trim()) {
                        input.classList.add('has-value');
                    }
                });
            }

            handleFormInput(e) {
                const input = e.target;
                if (input.value.trim()) {
                    input.classList.add('has-value');
                } else {
                    input.classList.remove('has-value');
                }
                
                // Real-time validation
                this.validateField(input);
            }

            handleFormBlur(e) {
                const input = e.target;
                input.classList.add('touched');
                this.validateField(input);
            }

            handleFormFocus(e) {
                const input = e.target;
                const field = input.closest('.form-field');
                if (field) {
                    field.classList.remove('has-error');
                }
            }

            validateField(input) {
                const field = input.closest('.form-field');
                if (!field) return;

                let isValid = true;
                let errorMessage = '';

                // Required validation
                if (input.hasAttribute('required') && !input.value.trim()) {
                    isValid = false;
                    errorMessage = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ';
                }

                // Email validation
                if (input.type === 'email' && input.value.trim()) {
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailRegex.test(input.value)) {
                        isValid = false;
                        errorMessage = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á';
                    }
                }

                // Phone validation
                if (input.type === 'tel' && input.value.trim()) {
                    const phoneRegex = /^[0-9+\-\s()]{8,15}$/;
                    if (!phoneRegex.test(input.value)) {
                        isValid = false;
                        errorMessage = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á';
                    }
                }

                // Update field state
                field.classList.toggle('has-error', !isValid);
                field.classList.toggle('has-success', isValid && input.value.trim());

                // Update error message
                let errorElement = field.querySelector('.form-error');
                if (!isValid && errorMessage) {
                    if (!errorElement) {
                        errorElement = document.createElement('div');
                        errorElement.className = 'form-error';
                        field.appendChild(errorElement);
                    }
                    errorElement.textContent = errorMessage;
                } else if (errorElement) {
                    errorElement.remove();
                }
            }

            setupFormLoading() {
                document.querySelectorAll('form').forEach(form => {
                    form.addEventListener('submit', (e) => {
                        const submitBtn = form.querySelector('button[type="submit"], input[type="submit"]');
                        if (submitBtn && !submitBtn.disabled) {
                            submitBtn.classList.add('btn-loading');
                            submitBtn.disabled = true;
                            
                            // Show loading overlay for important forms
                            if (form.dataset.showOverlay !== 'false') {
                                this.showLoading();
                            }
                        }
                    });
                });
            }

            // ================================================================
            // ALERT & TOAST SYSTEM
            // ================================================================
            
            setupAutoHideAlerts() {
                document.querySelectorAll('.alert:not([data-persist])').forEach(alert => {
                    setTimeout(() => {
                        this.fadeOutElement(alert);
                    }, 5000);
                });
            }

            closeAlert(e) {
                const alert = e.target.closest('.alert');
                if (alert) {
                    this.fadeOutElement(alert);
                }
            }

            showToast(message, type = 'info', duration = 4000) {
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                toast.innerHTML = `
                    <div class="toast-icon">
                        <i class="fas fa-${this.getToastIcon(type)}" aria-hidden="true"></i>
                    </div>
                    <div class="toast-content">
                        <div class="toast-message">${message}</div>
                    </div>
                    <button class="toast-close" aria-label="‡∏õ‡∏¥‡∏î">
                        <i class="fas fa-times" aria-hidden="true"></i>
                    </button>
                `;

                this.toastContainer.appendChild(toast);

                // Add close event
                toast.querySelector('.toast-close').addEventListener('click', () => {
                    this.fadeOutElement(toast);
                });

                // Show toast
                setTimeout(() => toast.classList.add('show'), 100);

                // Auto remove
                if (duration > 0) {
                    setTimeout(() => this.fadeOutElement(toast), duration);
                }

                return toast;
            }

            getToastIcon(type) {
                const icons = {
                    success: 'check-circle',
                    error: 'exclamation-triangle',
                    warning: 'exclamation-circle',
                    info: 'info-circle'
                };
                return icons[type] || icons.info;
            }

            // ================================================================
            // UTILITY FUNCTIONS
            // ================================================================
            
            showLoading() {
                if (this.loadingOverlay) {
                    this.loadingOverlay.classList.add('show');
                }
            }

            hideLoading() {
                if (this.loadingOverlay) {
                    this.loadingOverlay.classList.remove('show');
                }
            }

            fadeOutElement(element) {
                element.style.transition = 'all 0.3s ease';
                element.style.opacity = '0';
                element.style.transform = 'translateY(-10px)';
                setTimeout(() => {
                    if (element.parentNode) {
                        element.parentNode.removeChild(element);
                    }
                }, 300);
            }

            announce(message) {
                const announcement = document.createElement('div');
                announcement.setAttribute('aria-live', 'polite');
                announcement.setAttribute('aria-atomic', 'true');
                announcement.className = 'sr-only';
                announcement.textContent = message;
                document.body.appendChild(announcement);
                setTimeout(() => document.body.removeChild(announcement), 1000);
            }

            handleKeyboardNav(e) {
                // Escape key handling
                if (e.key === 'Escape') {
                    // Close mobile menu
                    if (this.navbarNav && this.navbarNav.classList.contains('active')) {
                        this.toggleMobileNav();
                    }
                    
                    // Close user dropdown
                    if (this.userDropdown && this.userDropdown.classList.contains('show')) {
                        this.toggleUserMenu();
                    }
                }
            }

            setupLazyLoading() {
                if ('IntersectionObserver' in window) {
                    const imageObserver = new IntersectionObserver((entries, observer) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                const img = entry.target;
                                img.src = img.dataset.src;
                                img.classList.remove('lazy');
                                observer.unobserve(img);
                            }
                        });
                    });

                    document.querySelectorAll('img[data-src]').forEach(img => {
                        imageObserver.observe(img);
                    });
                }
            }

            setupPerformanceMonitoring() {
                // Monitor performance and report issues
                if ('PerformanceObserver' in window) {
                    try {
                        const observer = new PerformanceObserver((list) => {
                            list.getEntries().forEach((entry) => {
                                if (entry.entryType === 'largest-contentful-paint') {
                                    console.log('LCP:', entry.startTime);
                                }
                            });
                        });
                        observer.observe({entryTypes: ['largest-contentful-paint']});
                    } catch (e) {
                        // Ignore errors in performance monitoring
                    }
                }
            }
        }

        // ================================================================
        // INITIALIZE APPLICATION
        // ================================================================
        
        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                window.junraiApp = new JunraiApp();
            });
        } else {
            window.junraiApp = new JunraiApp();
        }

        // Global utility functions for external use
        window.JunraiUtils = {
            showToast: (message, type, duration) => window.junraiApp?.showToast(message, type, duration),
            showLoading: () => window.junraiApp?.showLoading(),
            hideLoading: () => window.junraiApp?.hideLoading(),
            announce: (message) => window.junraiApp?.announce(message)
        };
    </script>

    <!-- Page-specific JavaScript -->
    <% if (typeof pageJS !== 'undefined') { %>
        <% pageJS.forEach(function(js) { %>
            <script src="/javascripts/<%= js %>.js"></script>
        <% }); %>
    <% } %>

    <!-- Analytics (if needed) -->
    <% if (typeof analyticsId !== 'undefined' && analyticsId) { %>
        <!-- Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=<%= analyticsId %>"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', '<%= analyticsId %>');
        </script>
    <% } %>
</body>
</html>