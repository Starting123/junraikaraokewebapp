<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ติดต่อเรา - Junrai Karaoke</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="/stylesheets/global.css">
    <link rel="stylesheet" href="/stylesheets/contact.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="navbar-content">
                <a href="/" class="navbar-brand">
                    <i class="fas fa-microphone-alt"></i>
                    Junrai Karaoke
                </a>
                
                <div class="navbar-main">
                    <ul class="navbar-nav">
                        <li><a href="/" class="nav-link">หน้าหลัก</a></li>
                        <li><a href="/rooms" class="nav-link">ห้องคาราโอเกะ</a></li>
                        <li><a href="/bookings" class="nav-link" id="bookingsLink" style="display: none;">การจอง</a></li>
                        <li><a href="/contact" class="nav-link active">ติดต่อเรา</a></li>
                        <li><a href="/admin" class="nav-link admin-link" id="adminLink" style="display: none;">
                            <i class="fas fa-shield-alt"></i> แดชบอร์ดผู้ดูแล
                        </a></li>
                        <li><a href="/auth" class="nav-link" id="authLink">เข้าสู่ระบบ</a></li>
                        <li><button class="btn btn-outline" onclick="logout()" id="logoutBtn" style="display: none;">ออกจากระบบ</button></li>
                    </ul>
                    
                    <!-- Store Hours Info -->
                    <div class="store-hours-info" id="storeHoursInfo">
                        <div class="hours-display">
                            <i class="fas fa-clock"></i>
                            <div class="hours-text">
                                <span class="hours-time">11.00 - 21.00</span>
                                <span class="hours-duration">10 ชม</span>
                            </div>
                        </div>
                        <div class="days-display">
                            <span class="open-days">เปิด: อังคาร - อาทิตย์</span>
                            <span class="closed-day">(หยุด) จันทร์</span>
                        </div>
                        <div class="store-status" id="storeStatus">
                            <span class="status-text" id="statusText">กำลังตรวจสอบ...</span>
                        </div>
                    </div>
                </div>
                
                <div class="nav-toggle" id="navToggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Header Section -->
    <section class="contact-header">
        <div class="container">
            <div class="header-content">
                <h1>
                    <i class="fas fa-phone-alt"></i>
                    ติดต่อเรา
                </h1>
                <p>เรายินดีที่จะรับฟังและให้บริการท่าน</p>
            </div>
        </div>
    </section>

    <!-- Contact Content -->
    <section class="contact-content">
        <div class="container">
            <div class="contact-grid">
                <!-- Contact Information -->
                <div class="contact-info-card">
                    <div class="card-header">
                        <h2>
                            <i class="fas fa-info-circle"></i>
                            ข้อมูลติดต่อ
                        </h2>
                    </div>
                    <div class="card-body">
                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <div class="contact-details">
                                <h4>ที่อยู่</h4>
                                <p>123 ถนนสุขุมวิท แขวงคลองเตย<br>เขตคลองเตย กรุงเทพฯ 10110</p>
                            </div>
                        </div>

                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fas fa-phone"></i>
                            </div>
                            <div class="contact-details">
                                <h4>โทรศัพท์</h4>
                                <p>02-xxx-xxxx<br>081-xxx-xxxx</p>
                            </div>
                        </div>

                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div class="contact-details">
                                <h4>อีเมล</h4>
                                <p>info@junraikaraoke.com</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Opening Hours -->
                <div class="hours-card">
                    <div class="card-header">
                        <h2>
                            <i class="fas fa-clock"></i>
                            เวลาทำการ
                        </h2>
                    </div>
                    <div class="card-body">
                        <!-- Current Status -->
                        <div class="current-status" id="currentStatus">
                            <div class="status-indicator" id="statusIndicator">
                                <span class="status-dot" id="statusDot"></span>
                                <span class="status-message" id="statusMessage">กำลังตรวจสอบสถานะ...</span>
                            </div>
                        </div>
                        
                        <!-- Opening Hours -->
                        <div class="hours-list">
                            <div class="hours-item main-hours">
                                <span class="day">อังคาร - อาทิตย์</span>
                                <span class="time">11:00 - 21:00</span>
                                <span class="duration">(10 ชั่วโมง)</span>
                            </div>
                            <div class="hours-item closed-day">
                                <span class="day">จันทร์</span>
                                <span class="time">ปิด</span>
                                <span class="note">(วันหยุดประจำ)</span>
                            </div>
                        </div>
                        
                        <!-- Additional Info -->
                        <div class="hours-note">
                            <i class="fas fa-info-circle"></i>
                            <p>เวลาอาจเปลี่ยนแปลงในวันหยุดนักขัตฤกษ์</p>
                        </div>
                    </div>
                </div>

                <!-- Social Media -->
                <div class="social-card">
                    <div class="card-header">
                        <h2>
                            <i class="fas fa-share-alt"></i>
                            ติดตามเรา
                        </h2>
                    </div>
                    <div class="card-body">
                        <div class="social-links">
                            <a href="#" class="social-link facebook">
                                <i class="fab fa-facebook-f"></i>
                                <span>Facebook</span>
                            </a>
                            <a href="#" class="social-link instagram">
                                <i class="fab fa-instagram"></i>
                                <span>Instagram</span>
                            </a>
                            <a href="#" class="social-link line">
                                <i class="fab fa-line"></i>
                                <span>Line Official</span>
                            </a>
                            <a href="#" class="social-link tiktok">
                                <i class="fab fa-tiktok"></i>
                                <span>TikTok</span>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Contact Form -->
                <div class="contact-form-card">
                    <div class="card-header">
                        <h2>
                            <i class="fas fa-paper-plane"></i>
                            ส่งข้อความถึงเรา
                        </h2>
                    </div>
                    <div class="card-body">
                        <form class="contact-form" id="contactForm">
                            <div class="form-group">
                                <label for="name">ชื่อ-นามสกุล</label>
                                <input type="text" id="name" name="name" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="email">อีเมล</label>
                                <input type="email" id="email" name="email" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="phone">เบอร์โทร</label>
                                <input type="tel" id="phone" name="phone">
                            </div>
                            
                            <div class="form-group">
                                <label for="subject">หัวข้อ</label>
                                <select id="subject" name="subject" required>
                                    <option value="">เลือกหัวข้อ</option>
                                    <option value="booking">สอบถามการจอง</option>
                                    <option value="complaint">ร้องเรียน</option>
                                    <option value="suggestion">ข้อเสนอแนะ</option>
                                    <option value="other">อื่นๆ</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="message">ข้อความ</label>
                                <textarea id="message" name="message" rows="5" required></textarea>
                            </div>
                            
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-paper-plane"></i>
                                ส่งข้อความ
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Map Section -->
                <div class="map-card">
                    <div class="card-header">
                        <h2>
                            <i class="fas fa-map-marked-alt"></i>
                            แผนที่
                        </h2>
                    </div>
                    <div class="card-body">
                        <div class="map-container">
                            <div class="map-placeholder">
                                <i class="fas fa-map"></i>
                                <p>แผนที่จะแสดงที่นี่</p>
                                <small>123 ถนนสุขุมวิท แขวงคลองเตย เขตคลองเตย กรุงเทพฯ 10110</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Features -->
                <div class="features-card">
                    <div class="card-header">
                        <h2>
                            <i class="fas fa-star"></i>
                            จุดเด่นของเรา
                        </h2>
                    </div>
                    <div class="card-body">
                        <div class="features-list">
                            <div class="feature-item">
                                <i class="fas fa-parking"></i>
                                <span>ที่จอดรถสะดวก</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-wifi"></i>
                                <span>WiFi ฟรี</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-utensils"></i>
                                <span>อาหารและเครื่องดื่ม</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-credit-card"></i>
                                <span>รับบัตรเครดิต</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-wheelchair"></i>
                                <span>เข้าถึงได้สำหรับผู้พิการ</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-air-freshener"></i>
                                <span>เครื่องปรับอากาศ</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- JavaScript -->
    <script>
        // Store Hours Management (Same as auth.ejs)
        function updateStoreStatus() {
            const now = new Date();
            const currentDay = now.getDay(); // 0 = Sunday, 1 = Monday, etc.
            const currentHour = now.getHours();
            const currentMinute = now.getMinutes();
            const currentTime = currentHour + (currentMinute / 60);
            
            const statusElement = document.getElementById('statusText');
            const statusMessage = document.getElementById('statusMessage');
            const statusDot = document.getElementById('statusDot');
            const hoursInfo = document.getElementById('storeHoursInfo');
            
            // Store hours: 11:00 - 21:00, Tuesday - Sunday (Closed Monday)
            const openTime = 11; // 11:00
            const closeTime = 21; // 21:00
            const isMonday = currentDay === 1;
            const isOpenDays = currentDay >= 2 || currentDay === 0; // Tuesday-Sunday
            const isWithinHours = currentTime >= openTime && currentTime < closeTime;
            
            if (isMonday) {
                // Monday - Closed
                if (statusElement) {
                    statusElement.textContent = '🔴 ปิด (วันหยุด)';
                    statusElement.className = 'status-text status-closed';
                }
                if (statusMessage) {
                    statusMessage.textContent = 'ปิดทำการ - วันจันทร์ (วันหยุดประจำ)';
                    statusMessage.className = 'status-message closed';
                }
                if (statusDot) {
                    statusDot.className = 'status-dot closed';
                }
                if (hoursInfo) {
                    hoursInfo.classList.add('store-closed');
                }
            } else if (isOpenDays && isWithinHours) {
                // Open
                const hoursLeft = closeTime - currentTime;
                const hoursText = hoursLeft > 1 ? `${Math.floor(hoursLeft)} ชม` : `${Math.floor(hoursLeft * 60)} นาที`;
                
                if (statusElement) {
                    statusElement.textContent = `🟢 เปิด (อีก ${hoursText})`;
                    statusElement.className = 'status-text status-open';
                }
                if (statusMessage) {
                    statusMessage.textContent = `เปิดให้บริการ - ปิดในอีก ${hoursText}`;
                    statusMessage.className = 'status-message open';
                }
                if (statusDot) {
                    statusDot.className = 'status-dot open';
                }
                if (hoursInfo) {
                    hoursInfo.classList.remove('store-closed');
                }
            } else {
                // Closed
                if (statusElement) {
                    statusElement.className = 'status-text status-closed';
                }
                if (statusDot) {
                    statusDot.className = 'status-dot closed';
                }
                if (hoursInfo) {
                    hoursInfo.classList.add('store-closed');
                }
                
                // Check if tomorrow is open
                const tomorrow = new Date(now);
                tomorrow.setDate(tomorrow.getDate() + 1);
                const tomorrowDay = tomorrow.getDay();
                
                if (tomorrowDay === 1) {
                    if (statusElement) {
                        statusElement.textContent = '🔴 ปิด (เปิดวันอังคาร 11:00)';
                    }
                    if (statusMessage) {
                        statusMessage.textContent = 'ปิดทำการ - เปิดวันอังคาร เวลา 11:00';
                        statusMessage.className = 'status-message closed';
                    }
                } else if (currentTime < openTime) {
                    const hoursUntilOpen = openTime - currentTime;
                    const timeText = hoursUntilOpen > 1 ? `${Math.floor(hoursUntilOpen)} ชม` : `${Math.floor(hoursUntilOpen * 60)} นาที`;
                    if (statusElement) {
                        statusElement.textContent = `🟡 ปิด (เปิดอีก ${timeText})`;
                    }
                    if (statusMessage) {
                        statusMessage.textContent = `ปิดทำการ - เปิดในอีก ${timeText}`;
                        statusMessage.className = 'status-message waiting';
                    }
                } else {
                    if (statusElement) {
                        statusElement.textContent = '🔴 ปิด (เปิดพรุ่งนี้ 11:00)';
                    }
                    if (statusMessage) {
                        statusMessage.textContent = 'ปิดทำการแล้ว - เปิดพรุ่งนี้ เวลา 11:00';
                        statusMessage.className = 'status-message closed';
                    }
                }
            }
        }

        // Mobile Navigation Toggle
        function toggleMobileNav() {
            const navMenu = document.getElementById('navMenu');
            const navToggle = document.getElementById('navToggle');
            
            if (navMenu && navToggle) {
                navToggle.addEventListener('click', () => {
                    navMenu.classList.toggle('active');
                    navToggle.classList.toggle('active');
                });
            }
        }

        // Check authentication
        function checkAuth() {
            const token = localStorage.getItem('token');
            const user = localStorage.getItem('user');
            
            if (token && user) {
                document.getElementById('authLink').style.display = 'none';
                document.getElementById('logoutBtn').style.display = 'block';
                document.getElementById('bookingsLink').style.display = 'block';
            }
        }

        // Logout function
        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            window.location.href = '/auth';
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', () => {
            updateStoreStatus();
            toggleMobileNav();
            checkAuth();
            
            // Update store status every minute
            setInterval(updateStoreStatus, 60000);
        });
    </script>
    <script src="/javascripts/shared/auth-nav.js"></script>
    <script src="/javascripts/contact.js"></script>
</body>
</html>