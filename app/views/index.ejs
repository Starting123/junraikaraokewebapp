<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Junrai Karaoke - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</title>
  <link rel="stylesheet" href="/css/global.css">
  <link rel="stylesheet" href="/css/index.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="container">
      <div class="navbar-content">
        <a href="/" class="navbar-brand">
          <i class="fas fa-microphone-alt"></i>
          Junrai Karaoke
        </a>
        
        <div class="navbar-main">
          <ul class="navbar-nav">
            <li><a href="/" class="nav-link active">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a></li>
            <li><a href="/rooms" class="nav-link">‡∏´‡πâ‡∏≠‡∏á‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞</a></li>
            <li><a href="/bookings" class="nav-link" id="bookingsLink" style="display: none;">‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</a></li>
            <li><a href="/contact" class="nav-link">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a></li>
            <li><a href="/auth" class="nav-link" id="authLink">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a></li>
            <li><button class="btn btn-outline" onclick="logout()" id="logoutBtn" style="display: none;">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button></li>
          </ul>
          
          <!-- Store Hours Info -->
          <div class="store-hours-info" id="storeHoursInfo">
            <div class="hours-display">
              <i class="fas fa-clock"></i>
              <div class="hours-text">
                <span class="hours-time">11.00 - 21.00</span>
                <span class="hours-duration">10 ‡∏ä‡∏°</span>
              </div>
            </div>
            <div class="days-display">
              <span class="open-days">‡πÄ‡∏õ‡∏¥‡∏î: ‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£ - ‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå</span>
              <span class="closed-day">(‡∏´‡∏¢‡∏∏‡∏î) ‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå</span>
            </div>
            <div class="store-status" id="storeStatus">
              <span class="status-text" id="statusText">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö...</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>
  <!-- Hero Section -->
  <section class="hero-section">
    <div class="container">
      <div class="hero-content">
        <h1 class="hero-title">
          <i class="fas fa-microphone-alt"></i>
          ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà Junrai Karaoke
        </h1>
        <p class="hero-subtitle">‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ‡∏á‡πà‡∏≤‡∏¢ ‡∏™‡∏∞‡∏î‡∏ß‡∏Å ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô</p>
        <div class="hero-actions">
          <a href="/rooms" class="btn btn-primary btn-lg">
            <i class="fas fa-door-open"></i>
            ‡∏î‡∏π‡∏´‡πâ‡∏≠‡∏á‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞
          </a>
          <a href="/bookings" class="btn btn-outline btn-lg" id="heroBookingBtn" style="display: none;">
            <i class="fas fa-calendar-plus"></i>
            ‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="features-section">
    <div class="container">
      <div class="section-header">
        <h2>‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</h2>
        <p>‡πÄ‡∏û‡∏•‡∏¥‡∏î‡πÄ‡∏û‡∏•‡∏¥‡∏ô‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á‡πÉ‡∏ô‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</p>
      </div>
      
      <div class="features-grid">
        <div class="feature-card">
          <div class="feature-icon">
            <i class="fas fa-music"></i>
          </div>
          <h3>‡πÄ‡∏û‡∏•‡∏á‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡πÅ‡∏ô‡∏ß</h3>
          <p>‡πÄ‡∏û‡∏•‡∏á‡πÑ‡∏ó‡∏¢ ‡∏™‡∏≤‡∏Å‡∏• ‡πÄ‡∏Å‡∏≤‡∏´‡∏•‡∏µ ‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô ‡πÅ‡∏•‡∏∞‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏≠‡∏µ‡∏Å‡∏°‡∏≤‡∏Å‡∏°‡∏≤‡∏¢</p>
        </div>
        
        <div class="feature-card">
          <div class="feature-icon">
            <i class="fas fa-utensils"></i>
          </div>
          <h3>‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°</h3>
          <p>‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ ‡∏™‡πà‡∏á‡∏ï‡∏£‡∏á‡∏ñ‡∏∂‡∏á‡∏´‡πâ‡∏≠‡∏á</p>
        </div>
        
        <div class="feature-card">
          <div class="feature-icon">
            <i class="fas fa-calendar-check"></i>
          </div>
          <h3>‡∏à‡∏≠‡∏á‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</h3>
          <p>‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏ï‡∏•‡∏≠‡∏î 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ‡∏ú‡πà‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</p>
        </div>
        
        <div class="feature-card">
          <div class="feature-icon">
            <i class="fas fa-star"></i>
          </div>
          <h3>‡∏´‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢</h3>
          <p>‡∏´‡πâ‡∏≠‡∏á‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤ VIP ‡πÅ‡∏•‡∏∞‡∏´‡πâ‡∏≠‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏ç‡πà ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Popular Rooms Section -->
  <section class="rooms-section">
    <div class="container">
      <div class="section-header">
        <h2>‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h2>
        <p>‡∏´‡πâ‡∏≠‡∏á‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</p>
      </div>
      
      <div class="rooms-grid" id="popularRooms">
        <div class="loading">
          <div class="spinner"></div>
          <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡πâ‡∏≠‡∏á...</p>
        </div>
      </div>
      
      <div class="text-center mt-4">
        <a href="/rooms" class="btn btn-primary btn-lg">
          <i class="fas fa-eye"></i>
          ‡∏î‡∏π‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        </a>
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section class="contact-section">
    <div class="container">
      <div class="section-header">
        <h2>‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</h2>
        <p>‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏∏‡∏Å‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á</p>
      </div>
      
      <div class="contact-content">
        <div class="contact-info">
          <div class="contact-card">
            <div class="contact-header">
              <i class="fas fa-info-circle"></i>
              <h3>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</h3>
            </div>
            <div class="contact-body">
              <div class="contact-item">
                <div class="contact-icon">
                  <i class="fas fa-phone"></i>
                </div>
                <div class="contact-details">
                  <strong>‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</strong>
                  <span>02-xxx-xxxx</span>
                  <span>081-xxx-xxxx</span>
                </div>
              </div>
              <div class="contact-item">
                <div class="contact-icon">
                  <i class="fas fa-envelope"></i>
                </div>
                <div class="contact-details">
                  <strong>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</strong>
                  <span>info@junraikaraoke.com</span>
                </div>
              </div>
              <div class="contact-item">
                <div class="contact-icon">
                  <i class="fas fa-map-marker-alt"></i>
                </div>
                <div class="contact-details">
                  <strong>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</strong>
                  <span>123 ‡∏ñ‡∏ô‡∏ô‡∏™‡∏∏‡∏Ç‡∏∏‡∏°‡∏ß‡∏¥‡∏ó ‡πÅ‡∏Ç‡∏ß‡∏á‡∏Ñ‡∏•‡∏≠‡∏á‡πÄ‡∏ï‡∏¢</span>
                  <span>‡πÄ‡∏Ç‡∏ï‡∏Ñ‡∏•‡∏≠‡∏á‡πÄ‡∏ï‡∏¢ ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø 10110</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="contact-hours">
          <div class="hours-card">
            <div class="contact-header">
              <i class="fas fa-clock"></i>
              <h3>‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏Å‡∏≤‡∏£</h3>
            </div>
            
            <!-- Current Status -->
            <div class="current-status-mini" id="currentStatusMini">
              <div class="status-indicator-mini">
                <span class="status-dot-mini" id="statusDotMini"></span>
                <span class="status-message-mini" id="statusMessageMini">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞...</span>
              </div>
            </div>
            
            <div class="contact-body">
              <div class="hours-list-mini">
                <div class="hours-item main">
                  <div class="hours-day">
                    <i class="fas fa-calendar-check"></i>
                    <span>‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£ - ‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå</span>
                  </div>
                  <div class="hours-time">
                    <strong>11:00 - 21:00</strong>
                    <small>(10 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)</small>
                  </div>
                </div>
                <div class="hours-item closed">
                  <div class="hours-day">
                    <i class="fas fa-calendar-times"></i>
                    <span>‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå</span>
                  </div>
                  <div class="hours-time">
                    <strong>‡∏õ‡∏¥‡∏î</strong>
                    <small>(‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏à‡∏≥)</small>
                  </div>
                </div>
              </div>
              
              <div class="hours-note-mini">
                <i class="fas fa-info-circle"></i>
                <p>‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≤‡∏à‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏ô‡∏±‡∏Å‡∏Ç‡∏±‡∏ï‡∏§‡∏Å‡∏©‡πå</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="contact-actions">
        <a href="/contact" class="btn btn-primary btn-lg">
          <i class="fas fa-paper-plane"></i>
          ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏∂‡∏á‡πÄ‡∏£‡∏≤
        </a>
        <a href="tel:02-xxx-xxxx" class="btn btn-outline btn-lg">
          <i class="fas fa-phone"></i>
          ‡πÇ‡∏ó‡∏£‡∏´‡∏≤‡πÄ‡∏£‡∏≤
        </a>
      </div>
    </div>
  </section>

  <script>
    // Global variables
    let currentUser = null;
    const API_BASE = '/api';

    // Store Hours Management
    function updateStoreStatus() {
      const now = new Date();
      const currentDay = now.getDay(); // 0 = Sunday, 1 = Monday, etc.
      const currentHour = now.getHours();
      const currentMinute = now.getMinutes();
      const currentTime = currentHour + (currentMinute / 60);
      
      const statusElement = document.getElementById('statusText');
      const statusMessageMini = document.getElementById('statusMessageMini');
      const statusDotMini = document.getElementById('statusDotMini');
      const hoursInfo = document.getElementById('storeHoursInfo');
      
      // Store hours: 11:00 - 21:00, Tuesday - Sunday (Closed Monday)
      const openTime = 11; // 11:00
      const closeTime = 21; // 21:00
      const isMonday = currentDay === 1;
      const isOpenDays = currentDay >= 2 || currentDay === 0; // Tuesday-Sunday
      const isWithinHours = currentTime >= openTime && currentTime < closeTime;
      
      if (isMonday) {
        // Monday - Closed
        if (statusElement) {
          statusElement.textContent = 'üî¥ ‡∏õ‡∏¥‡∏î (‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î)';
          statusElement.className = 'status-text status-closed';
        }
        if (statusMessageMini) {
          statusMessageMini.textContent = '‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ - ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏à‡∏≥';
          statusMessageMini.className = 'status-message-mini closed';
        }
        if (statusDotMini) {
          statusDotMini.className = 'status-dot-mini closed';
        }
        if (hoursInfo) {
          hoursInfo.classList.add('store-closed');
        }
      } else if (isOpenDays && isWithinHours) {
        // Open
        const hoursLeft = closeTime - currentTime;
        const hoursText = hoursLeft > 1 ? `${Math.floor(hoursLeft)} ‡∏ä‡∏°` : `${Math.floor(hoursLeft * 60)} ‡∏ô‡∏≤‡∏ó‡∏µ`;
        
        if (statusElement) {
          statusElement.textContent = `üü¢ ‡πÄ‡∏õ‡∏¥‡∏î (‡∏≠‡∏µ‡∏Å ${hoursText})`;
          statusElement.className = 'status-text status-open';
        }
        if (statusMessageMini) {
          statusMessageMini.textContent = `‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ - ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô‡∏≠‡∏µ‡∏Å ${hoursText}`;
          statusMessageMini.className = 'status-message-mini open';
        }
        if (statusDotMini) {
          statusDotMini.className = 'status-dot-mini open';
        }
        if (hoursInfo) {
          hoursInfo.classList.remove('store-closed');
        }
      } else {
        // Closed
        if (statusElement) {
          statusElement.className = 'status-text status-closed';
        }
        if (statusDotMini) {
          statusDotMini.className = 'status-dot-mini closed';
        }
        if (hoursInfo) {
          hoursInfo.classList.add('store-closed');
        }
        
        // Check if tomorrow is open
        const tomorrow = new Date(now);
        tomorrow.setDate(tomorrow.getDate() + 1);
        const tomorrowDay = tomorrow.getDay();
        
        if (tomorrowDay === 1) {
          if (statusElement) {
            statusElement.textContent = 'üî¥ ‡∏õ‡∏¥‡∏î (‡πÄ‡∏õ‡∏¥‡∏î‡∏ß‡∏±‡∏ô‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£ 11:00)';
          }
          if (statusMessageMini) {
            statusMessageMini.textContent = '‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ - ‡πÄ‡∏õ‡∏¥‡∏î‡∏ß‡∏±‡∏ô‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£ 11:00';
            statusMessageMini.className = 'status-message-mini closed';
          }
        } else if (currentTime < openTime) {
          const hoursUntilOpen = openTime - currentTime;
          const timeText = hoursUntilOpen > 1 ? `${Math.floor(hoursUntilOpen)} ‡∏ä‡∏°` : `${Math.floor(hoursUntilOpen * 60)} ‡∏ô‡∏≤‡∏ó‡∏µ`;
          if (statusElement) {
            statusElement.textContent = `üü° ‡∏õ‡∏¥‡∏î (‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏µ‡∏Å ${timeText})`;
          }
          if (statusMessageMini) {
            statusMessageMini.textContent = `‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ - ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô‡∏≠‡∏µ‡∏Å ${timeText}`;
            statusMessageMini.className = 'status-message-mini waiting';
          }
        } else {
          if (statusElement) {
            statusElement.textContent = 'üî¥ ‡∏õ‡∏¥‡∏î (‡πÄ‡∏õ‡∏¥‡∏î‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ 11:00)';
          }
          if (statusMessageMini) {
            statusMessageMini.textContent = '‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ - ‡πÄ‡∏õ‡∏¥‡∏î‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ 11:00';
            statusMessageMini.className = 'status-message-mini closed';
          }
        }
      }
    }

    // Initialize page
    document.addEventListener('DOMContentLoaded', () => {
      checkAuth();
      loadPopularRooms();
      updateStoreStatus();
      
      // Update store status every minute
      setInterval(updateStoreStatus, 60000);
    });

    // Check authentication
    function checkAuth() {
      const token = localStorage.getItem('token');
      const user = localStorage.getItem('user');
      
      if (token && user) {
        currentUser = JSON.parse(user);
        document.getElementById('authLink').style.display = 'none';
        document.getElementById('logoutBtn').style.display = 'block';
        document.getElementById('bookingsLink').style.display = 'block';
        document.getElementById('heroBookingBtn').style.display = 'inline-flex';
      }
    }

    // Logout function
    function logout() {
      localStorage.removeItem('token');
      localStorage.removeItem('user');
      window.location.reload();
    }

    // Load popular rooms
    async function loadPopularRooms() {
      try {
        const response = await fetch(`${API_BASE}/rooms/roomForm`);
        if (response.ok) {
          const rooms = await response.json();
          const availableRooms = rooms.filter(room => room.status === 'available').slice(0, 3);
          displayPopularRooms(availableRooms);
        } else {
          throw new Error('Failed to load rooms');
        }
      } catch (error) {
        console.error('Error loading rooms:', error);
        document.getElementById('popularRooms').innerHTML = `
          <div class="error-message">
            <i class="fas fa-exclamation-triangle"></i>
            <p>‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ</p>
          </div>
        `;
      }
    }

    // Display popular rooms
    function displayPopularRooms(rooms) {
      const container = document.getElementById('popularRooms');
      
      if (rooms.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <i class="fas fa-door-closed"></i>
            <h3>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á</h3>
            <p>‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</p>
          </div>
        `;
        return;
      }

      container.innerHTML = rooms.map(room => `
        <div class="room-card featured" onclick="viewRoom(${room.room_id})">
          <div class="room-badge">
            <i class="fas fa-star"></i>
            ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥
          </div>
          
          <div class="room-header">
            <div class="room-status available">
              <i class="fas fa-check-circle"></i>
              ‡∏ß‡πà‡∏≤‡∏á
            </div>
          </div>
          
          <div class="room-body">
            <h4 class="room-name">
              <i class="fas fa-door-open"></i>
              ${room.name}
            </h4>
            
            <div class="room-info">
              <div class="info-item">
                <i class="fas fa-tags"></i>
                <span>${room.type_name || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó'}</span>
              </div>
              
              <div class="info-item">
                <i class="fas fa-users"></i>
                <span>${room.capacity || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏'} ‡∏Ñ‡∏ô</span>
              </div>
            </div>
          </div>
          
          <div class="room-footer">
            <button class="btn btn-primary" onclick="event.stopPropagation(); bookRoom(${room.room_id})">
              <i class="fas fa-calendar-plus"></i>
              ‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á
            </button>
          </div>
        </div>
      `).join('');
    }

    // View room details
    function viewRoom(roomId) {
      window.location.href = `/rooms?room=${roomId}`;
    }

    // Book room
    function bookRoom(roomId) {
      if (!currentUser) {
        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á');
        window.location.href = '/auth';
        return;
      }
      
      window.location.href = `/bookings?room=${roomId}`;
    }
  </script>
</body>
</html>
